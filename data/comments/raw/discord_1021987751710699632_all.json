{"source": "discord", "metadata": {"channel_id": "1021987751710699632", "after": null, "before": null}, "content": {"guild": {"id": "608014603317936148", "name": "flutter", "iconUrl": "https://cdn.discordapp.com/icons/608014603317936148/0ccc662ed5e2e6df807f4d3cde7018e8.png"}, "channel": {"id": "1021987751710699632", "type": "GuildPublicThread", "categoryId": "608021234516754444", "category": "hackers-framework-\ud83d\udd29", "name": "Preempt layout", "topic": null}, "dateRange": {"after": null, "before": null}, "messages": [{"id": "1021993719337058354", "type": "21", "timestamp": "2022-09-21T03:58:10.415+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1021987751710699632", "channelId": "608021234516754444", "guildId": "608014603317936148"}}, {"id": "1021993721140621353", "type": "Default", "timestamp": "2022-09-21T03:58:10.845+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "This is a good part of what makes it hard. The difficult case right now isn't the progress indicator, it's when you have a large scene change (like a route transition or some other full screen animation).", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021993881371418714", "type": "Default", "timestamp": "2022-09-21T03:58:49.047+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "And lets say you want to render a lot of small pieces of text, which now all have to get laid out for the first time and will send you over budget for a single frame.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021994148284334130", "type": "Default", "timestamp": "2022-09-21T03:59:52.684+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I see, I guess my proposal can solve the problem?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021994222368329809", "type": "Default", "timestamp": "2022-09-21T04:00:10.347+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield Btw what do you think about the proposal \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1021995751154389032", "type": "Default", "timestamp": "2022-09-21T04:06:14.838+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I think it's interesting but it's missing a lot of important details", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021997189628706838", "type": "Default", "timestamp": "2022-09-21T04:11:57.797+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I am willing to fill in details", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021997228736389150", "type": "Default", "timestamp": "2022-09-21T04:12:07.121+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "and will prototype as well", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021997250488053840", "type": "Default", "timestamp": "2022-09-21T04:12:12.307+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "so what is missing?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1021998838363463690", "type": "Default", "timestamp": "2022-09-21T04:18:30.886+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I have replied to google doc (not see that just now)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022130584279068772", "type": "Default", "timestamp": "2022-09-21T13:02:01.56+00:00", "timestampEdited": "2022-09-21T13:02:24.149+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "In the current Framework design, once entering the RenderFlexObject, all child nodes will be Layout, and when the RO tree Layout is completed, paint will be submitted. Now we add a timer to the RenderFlexObject layout, the first child node layout is almost finished (16ms), at which point we interrupt the layout and submit the current RO tree for Paint. At this point, RenderFlexObject contains a child node. When the next schedule comes, do I continue to start from this RenderFlexObject node or something else?", "author": {"id": "824483790226980935", "name": "Jsouliang", "discriminator": "2639", "nickname": "Jsouliang", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/824483790226980935/8d76e22dee517cd2d86d106cf9457889.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131117471580190", "type": "Default", "timestamp": "2022-09-21T13:04:08.683+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So I guess you mean your example has an app which has Flex as its root widget, and thus RenderFlex as its root RenderObject?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131391699353620", "type": "Default", "timestamp": "2022-09-21T13:05:14.064+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> When the next schedule comes, do I continue to start from this RenderFlexObject node or something else?\nWe do not continue to \"start from\" anywhere. We just *call* the preemptRender function inside `RenderObject.layout()`. And then, when preemptRender function returns, we continue running our code.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131453099786250", "type": "Default", "timestamp": "2022-09-21T13:05:28.703+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "preemptRender is nothing but a very normal function", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131706469306388", "type": "Default", "timestamp": "2022-09-21T13:06:29.111+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I want to know more details of preemptModifyLayerTree CircularProgressIndicator such as you mentioned. What will do in preemptModifyLayerTree?", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131786446282772", "type": "Default", "timestamp": "2022-09-21T13:06:48.179+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "```\nvoid preemptModifyLayerTree() {\n  for (final renderObject in renderObjectsWhoWantsToPreemptModifyTheLayerTree) renderObject.preemptModifyLayerTree();\n}\n```", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131839164485632", "type": "Default", "timestamp": "2022-09-21T13:07:00.748+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "```\nclass RenderPreemptDisplayList extends RenderBox {\n  @override\n  void paint(PaintingContext context, Offset offset) {\n    layer = paint_child_subtree_inside_a_DisplayListLayer();\n  }\n\n  @override\n  void preemptModifyLayerTree() {\n    layer = paint_child_subtree_inside_a_DisplayListLayer();\n  }\n}\n\n```", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131888640499782", "type": "Default", "timestamp": "2022-09-21T13:07:12.544+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So, it calls RenderPreemptDisplayList.preemptModifyLayerTree", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022131947541102632", "type": "Default", "timestamp": "2022-09-21T13:07:26.587+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Then, RenderPreemptDisplayList.preemptModifyLayerTree paints its child.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022132013194547200", "type": "Default", "timestamp": "2022-09-21T13:07:42.24+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "For simplicity, let's say, we do not want a CircularProgressIndicator, but only want a color rect", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022132021784498186", "type": "Default", "timestamp": "2022-09-21T13:07:44.288+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Then it is like:", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022132176910831656", "type": "Default", "timestamp": "2022-09-21T13:08:21.273+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "```\nclass RenderWhatever extends RenderBox {\n  @override\n  void paint(PaintingContext context, Offset offset) {\n    layer = create_DisplayListLayer_and_paint_a_colored_rect(color: red);\n  }\n\n  @override\n  void preemptModifyLayerTree() {\n    layer = create_DisplayListLayer_and_paint_a_colored_rect(color: whatever_color_you_like_in_animation);\n  }\n}\n```", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022132562606440488", "type": "Default", "timestamp": "2022-09-21T13:09:53.23+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "What would you do in the `paint_child_subtree_inside_a_DisplayListLayer` method at this point in the interrupt, maybe the child node hasn't been built/laid out yet?", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022132763761053716", "type": "Reply", "timestamp": "2022-09-21T13:10:41.189+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "`    layer = create_DisplayListLayer_and_paint_a_colored_rect(color: red);`\n like placeholder \uff1f", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022132176910831656", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022132843473809458", "type": "Reply", "timestamp": "2022-09-21T13:11:00.194+00:00", "timestampEdited": "2022-09-21T13:12:32.304+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "For circular progress indicator, just paint a indicator you need", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "isBot": false}], "reference": {"messageId": "1022132562606440488", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022132900289851432", "type": "Default", "timestamp": "2022-09-21T13:11:13.74+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "for scrolling listview, it is a longer story, maybe see doc", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022136927232720916", "type": "Reply", "timestamp": "2022-09-21T13:27:13.838+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@fzyzcjy  The build/layout phase is a recursive call, how do you break it?On keframe, we're actually doing recursion on the current frame, just using placeholders", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022132843473809458", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022137348475068487", "type": "Default", "timestamp": "2022-09-21T13:28:54.27+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Just do not break it \ud83d\ude42 We are *calling* preemptRender. The call stack become deeper when calling that function", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022137580600438815", "type": "Default", "timestamp": "2022-09-21T13:29:49.613+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [{"id": "1022137580218761226", "url": "https://cdn.discordapp.com/attachments/1021987751710699632/1022137580218761226/unknown.png", "fileName": "unknown.png", "fileSizeBytes": 106627}], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022137683688030228", "type": "Default", "timestamp": "2022-09-21T13:30:14.191+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "In that figure, a rectangle means the life of a function.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022137801099190334", "type": "Reply", "timestamp": "2022-09-21T13:30:42.184+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "so for not layout node we will paint a placeholder rect like this?", "author": {"id": "824483790226980935", "name": "Jsouliang", "discriminator": "2639", "nickname": "Jsouliang", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/824483790226980935/8d76e22dee517cd2d86d106cf9457889.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022137348475068487", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022137931881795694", "type": "Default", "timestamp": "2022-09-21T13:31:13.365+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "We will know nothing for a node that *has not* been painted *before* this frame", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022137959962644480", "type": "Default", "timestamp": "2022-09-21T13:31:20.06+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Because it is not in the layer tree", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022138051855667302", "type": "Default", "timestamp": "2022-09-21T13:31:41.969+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "No placeholder rect indeed. But if you like, what about just putting a placeholder rect there, in previous frame", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022138088354480258", "type": "Default", "timestamp": "2022-09-21T13:31:50.671+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Well the story is like:", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022138149327085609", "type": "Default", "timestamp": "2022-09-21T13:32:05.208+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "https://discord.com/channels/608014603317936148/608021234516754444/1021988294550110259", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022138208898781204", "type": "Default", "timestamp": "2022-09-21T13:32:19.411+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Some researches or nvidia has some \"magic\" such that, they input some low resolution low fps frames, and output high resolution high fps frames. Consider this proposal as such kind of \"tween creator\".", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022138382106771496", "type": "Default", "timestamp": "2022-09-21T13:33:00.707+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So this proposal will output some extra frames, which are just \"previous jank frame's layer tree + preemotModifyLayerTree minor changes like animation\"", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022138949931634688", "type": "Reply", "timestamp": "2022-09-21T13:35:16.087+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Does this mean that the build/layout of all nodes needs to be synchronized for this to happen? Normally build, layout are recursive calls.", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022137348475068487", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022139119264075839", "type": "Default", "timestamp": "2022-09-21T13:35:56.459+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> Does this mean that the build/layout of all nodes needs to be synchronized for this to happen? Normally build, layout are recursive calls.\nIt is still recursive call. Just like plain old. Except that one extra line:", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022139135709945856", "type": "Default", "timestamp": "2022-09-21T13:36:00.38+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "```\nclass RenderObject {\n  void layout(Constraints constraints, { bool parentUsesSize = false }) {\n    if (nearTimeout) { preemptRender(); }\n    \u2026 the original layout code \u2026\n  }\n}\n```", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4c", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44c.svg"}, "count": 1}], "mentions": []}, {"id": "1022141575133929614", "type": "Default", "timestamp": "2022-09-21T13:45:41.984+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I kind of figured it out. The core thing is that when my time is running out, submit a LayerTree to the engine in `preemptRender` for rendering, and then continue with layout (The recursion does not exit at this point\n).", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022141675839180829", "type": "Default", "timestamp": "2022-09-21T13:46:05.994+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes!", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022141746286702642", "type": "Default", "timestamp": "2022-09-21T13:46:22.79+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Then we get zero overhead for a lot of thing, etc", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc40", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f440.svg"}, "count": 1}], "mentions": []}, {"id": "1022141794525401098", "type": "Default", "timestamp": "2022-09-21T13:46:34.291+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "What if the whole element tree and RO tree change in the next frame", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022141849995063376", "type": "Default", "timestamp": "2022-09-21T13:46:47.516+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Just do the same thing in the next cycle", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022141859230928947", "type": "Default", "timestamp": "2022-09-21T13:46:49.718+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Is there any problem", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022141913366810754", "type": "Reply", "timestamp": "2022-09-21T13:47:02.625+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Just use this mimic", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [], "reference": {"messageId": "1022138208898781204", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022142732887670905", "type": "Default", "timestamp": "2022-09-21T13:50:18.014+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Is paint applied to the parent of the interrupt node? I'm more concerned with the generation of this Layertree.", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022143507558834216", "type": "Default", "timestamp": "2022-09-21T13:53:22.71+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "No", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022143624709935125", "type": "Default", "timestamp": "2022-09-21T13:53:50.641+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "no paint is happened in preemptRender, except for preemptModifyLayerTree - which only few specialized RO will handle", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022143715445325896", "type": "Default", "timestamp": "2022-09-21T13:54:12.274+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "but anyway, if you use PreemptDisplayList and put progress indicator as its child, then that child does get painted", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022144207617527848", "type": "Default", "timestamp": "2022-09-21T13:56:09.617+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "The key point I think is that the generation of this Layertree, if we just call preemptRender(), For example, `layer = create_DisplayListLayer_and_paint_a_colored_rect(color: whatever_color_you_like_in_animation);`  , it could be very different from the previous UI", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022145486444056636", "type": "Default", "timestamp": "2022-09-21T14:01:14.513+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "We do not generate a whole new layer tree. Instead, we modify it a little bit in the preemptModifyLayerTree", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022145565699612773", "type": "Default", "timestamp": "2022-09-21T14:01:33.409+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "For example, modify the color of a box a little bit, modify the shifting of the listview a bit", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022145618166157332", "type": "Default", "timestamp": "2022-09-21T14:01:45.918+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "so it will be very similar to previous (janky) frame except for a bit of animation change", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022145714115067975", "type": "Default", "timestamp": "2022-09-21T14:02:08.794+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "surely it may be different from next frame, if your prev frame is diff from next frame - but that definitely should be like that", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022146721645596773", "type": "Default", "timestamp": "2022-09-21T14:06:09.008+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes, I think it depends on the height similarity between the two frames", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022147860646600797", "type": "Default", "timestamp": "2022-09-21T14:10:40.567+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "There are two issues I would love to see more detail on: \n1. How to generate this Layertree to the Engine when an interrupt occurs (e.g., two frames are completely different) \n2. How to handle vsync scheduling in case of interruption (for example, the whole Widget tree changes in the next vsync)", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022147953902759956", "type": "Default", "timestamp": "2022-09-21T14:11:02.801+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Would you consider making a prototype of this solution any time soon?", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022148131804151829", "type": "Default", "timestamp": "2022-09-21T14:11:45.216+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> How to generate this Layertree to the Engine when an interrupt occurs (e.g., two frames are completely different)\nSince when preemptRender happens, we are in build & layout phase, we never touch layer tree yet. So we have the old layer tree. Now, we provide the old layer tree (with minor modify from preemptModifyLayerTree), to the engine", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022148419046866964", "type": "Default", "timestamp": "2022-09-21T14:12:53.7+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> How to handle vsync scheduling in case of interruption (for example, the whole Widget tree changes in the next vsync)\nNo vsync is passed to dart layer during jank. Say we have a build/layout that takes 1s. Then during the 60 hardware vsync, we render 60 frames to screen via preemptRender. However, for the Dart code (excluding the preemptRender part), it only sees *one* vsync, *one* build/paint/layout/etc.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022148441746440192", "type": "Default", "timestamp": "2022-09-21T14:12:59.112+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> Would you consider making a prototype of this solution any time soon?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022148462906724436", "type": "Default", "timestamp": "2022-09-21T14:13:04.157+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Sure \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022149372185686128", "type": "Default", "timestamp": "2022-09-21T14:16:40.946+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I think the core is the design of this `preemptModifyLayerTree` which sounds similar to some low FPS conversion high FPS (inserting excessive frames in the middle).", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022149456407314502", "type": "Default", "timestamp": "2022-09-21T14:17:01.026+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes, I have said that here:", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022149493371711488", "type": "Default", "timestamp": "2022-09-21T14:17:09.839+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "https://discord.com/channels/608014603317936148/608021234516754444/1021987957021868062", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4d", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44d.svg"}, "count": 1}], "mentions": []}, {"id": "1022149552012263494", "type": "Default", "timestamp": "2022-09-21T14:17:23.82+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "and here: https://discord.com/channels/608014603317936148/1021987751710699632/1022138208898781204", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022150021883383838", "type": "Default", "timestamp": "2022-09-21T14:19:15.846+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Indeed I am inserting a paragraph saying similar things into the doc at the same minute haha", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [{"id": "1022150020344070244", "url": "https://cdn.discordapp.com/attachments/1021987751710699632/1022150020344070244/unknown.png", "fileName": "unknown.png", "fileSizeBytes": 112664}, {"id": "1022150020788654110", "url": "https://cdn.discordapp.com/attachments/1021987751710699632/1022150020788654110/unknown.png", "fileName": "unknown.png", "fileSizeBytes": 126161}], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\ude03", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f603.svg"}, "count": 1}], "mentions": []}, {"id": "1022150200313266247", "type": "Reply", "timestamp": "2022-09-21T14:19:58.387+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes, (sorry I didn't really understand that before)", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022148462906724436", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022150233808982176", "type": "Default", "timestamp": "2022-09-21T14:20:06.373+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [{"id": "1022150233473417246", "url": "https://cdn.discordapp.com/attachments/1021987751710699632/1022150233473417246/unknown.png", "fileName": "unknown.png", "fileSizeBytes": 25238}], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022150268843987016", "type": "Reply", "timestamp": "2022-09-21T14:20:14.726+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "That's OK", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "isBot": false}], "reference": {"messageId": "1022150200313266247", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022152307984584764", "type": "Default", "timestamp": "2022-09-21T14:28:20.895+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If the core is `preemptModifyLayerTree`, that means when you want do some high priority render, you have to implement it?", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022152899582754897", "type": "Default", "timestamp": "2022-09-21T14:30:41.943+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes and no. \n1. For whatever widget tree that fit in a layer subtree without disturbing others, like a CircularProgressIndicator, reuse existing (well, to-be-written) PreemptDisplayList\n2. For listview scrolling, maybe just let ListView's RO implement preemptModifyLayerTree to implement inertia etc. (The design doc is a bit old, see discussions above for details)\n3. But I will think about more general solution to support arbitrary case. Anyway this is not the top priority - we should have the main idea running", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022153705920921630", "type": "Reply", "timestamp": "2022-09-21T14:33:54.189+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "that means a new mechanism to implement for widgets who want use it, and has a cost to migrate", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022152899582754897", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022153885541998693", "type": "Default", "timestamp": "2022-09-21T14:34:37.014+00:00", "timestampEdited": "2022-09-21T14:35:32.485+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "For widgets who want 60fps, I guess not much - you can reuse it in many places", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022154012226748476", "type": "Default", "timestamp": "2022-09-21T14:35:07.218+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It is like, we write down computeIntrinsicWidth, performLayout, performDryLayout, etc, a lot of things manually nowadays", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022154256196829195", "type": "Default", "timestamp": "2022-09-21T14:36:05.385+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Notice we never need to implement new functions for things like CircularProgressIndicator", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022154342666604574", "type": "Default", "timestamp": "2022-09-21T14:36:26.001+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "for those, just use the existing (will-be-in-framework) PreemptDisplayList", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022154720980258907", "type": "Default", "timestamp": "2022-09-21T14:37:56.198+00:00", "timestampEdited": "2022-09-21T14:38:58.321+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "And according to you pseudo code, one RO has a layer for previous frame, if it laid with all its relative parts, what should we do for its layer, will it be updated? and what happened when it completed?\nDid that means layer painting is un-interrupted?", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022154930213101578", "type": "Default", "timestamp": "2022-09-21T14:38:46.083+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> if it laid with all its relative parts\nDo you mean, what happen if that RO has its layer be the new data (instead of old data of previous frame)?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022154962270179429", "type": "Default", "timestamp": "2022-09-21T14:38:53.726+00:00", "timestampEdited": "2022-09-21T14:39:03.414+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "That will not happen. We only preempt during build & layout phase. Paint is not happen yet", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022155160287445063", "type": "Reply", "timestamp": "2022-09-21T14:39:40.937+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I got it, layers only change when paint commit", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022154962270179429", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022155199147671583", "type": "Default", "timestamp": "2022-09-21T14:39:50.202+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes, IIRC", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022155442824159242", "type": "Default", "timestamp": "2022-09-21T14:40:48.299+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So there is no such thing like Fiber do, build/layout, record and diff?", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022155514773258240", "type": "Default", "timestamp": "2022-09-21T14:41:05.453+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Maybe yes?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022156434760269905", "type": "Default", "timestamp": "2022-09-21T14:44:44.795+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "What if the `preemptModifyLayerTree` overcost?", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022156603660697612", "type": "Default", "timestamp": "2022-09-21T14:45:25.064+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Then it janks, surely", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022156617799696425", "type": "Default", "timestamp": "2022-09-21T14:45:28.435+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "but why it overcost", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022156698871402607", "type": "Reply", "timestamp": "2022-09-21T14:45:47.764+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "when the implement sucks", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022156617799696425", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022156706198847548", "type": "Default", "timestamp": "2022-09-21T14:45:49.511+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "e.g. painting a tiny progress indicator, should be fast; for listview scrolling example, just modify a little bit of OffsetLayer.offset", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022156765103669288", "type": "Reply", "timestamp": "2022-09-21T14:46:03.555+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It is like asking \"what if you misuse flutter\" - answer is you get trouble \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4c", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44c.svg"}, "count": 1}], "mentions": [{"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "isBot": false}], "reference": {"messageId": "1022156698871402607", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022158210309820436", "type": "Default", "timestamp": "2022-09-21T14:51:48.119+00:00", "timestampEdited": "2022-09-21T15:16:34.653+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "A question popped into my mind, I'm thinking of what the difference between this and Keframe(Especially after your optimization, build/layout as many widgets as possible in one frame)? For example, for some Wigdet you mentioned, need to implement preemptModifyLayerTree, and in this case, what if you use KeFrame and you set a placeholder like that?", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022158616666587247", "type": "Default", "timestamp": "2022-09-21T14:53:25.002+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> tell me the difference between this and Keframe\nI am going to sleep in a minute, will compare it tomorrow morning. Indeed the design doc has talked a little bit, and github issues also talked a bit.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022158676565430372", "type": "Default", "timestamp": "2022-09-21T14:53:39.283+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@fzyzcjy Hey! I've been lurking on the GitHub thread and didn't want to ask this there as I feel like I'm missing something.\n\nDoes your most recent proposal allow trivial layout changes to take priority over multi-frame changes? It seems a lot of nontrivial animations require some amount of layout shifting, but your diagram seems to indicate that all widgets must still build and layout in turn, so if an expensive widget needed to rebuild in a different part of the tree then it would still jank since the animation builder would still need to wait its turn.\n\nSorry if this is somewhat ignorant, I'm still trying to wrap my mind around it all.", "author": {"id": "118876142114570240", "name": "SecondFlight", "discriminator": "7948", "nickname": "SecondFlight", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/118876142114570240/53dfcf1853e07a1127f4edd19ab40145.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}]}, {"id": "1022158725873664070", "type": "Default", "timestamp": "2022-09-21T14:53:51.039+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Also please sleep if you need to, the question can wait \ud83d\ude42", "author": {"id": "118876142114570240", "name": "SecondFlight", "discriminator": "7948", "nickname": "SecondFlight", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/118876142114570240/53dfcf1853e07a1127f4edd19ab40145.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022158850192855142", "type": "Default", "timestamp": "2022-09-21T14:54:20.679+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@SecondFlight Hi, I will reply tomorrow morning \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\u2764\ufe0f", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/2764.svg"}, "count": 1}], "mentions": [{"id": "118876142114570240", "name": "SecondFlight", "discriminator": "7948", "nickname": "SecondFlight", "isBot": false}]}, {"id": "1022159079478661151", "type": "Reply", "timestamp": "2022-09-21T14:55:15.345+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Well, I actually know the answer to that, but I think it might need to be spelled out a little bit more clearly", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1022158616666587247", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022159499781484624", "type": "Default", "timestamp": "2022-09-21T14:56:55.553+00:00", "timestampEdited": "2022-09-21T14:58:14.615+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "I'm still looking forward to your prototype \uff0cWell done", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022159538683662387", "type": "Default", "timestamp": "2022-09-21T14:57:04.828+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "good night \ud83c\udf19", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022159633785290862", "type": "Default", "timestamp": "2022-09-21T14:57:27.502+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Thanks, good night", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022189103132987392", "type": "Default", "timestamp": "2022-09-21T16:54:33.542+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I've already lost track of this thread, but I think there's some good questions here about how this would work in a flex based widget (e.g. a column or row). We also should try to think about how it'd work in general for multi-child ROs", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022282608626892891", "type": "Reply", "timestamp": "2022-09-21T23:06:06.989+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> I've already lost track of this thread\nAh feel free to ask any questions and I am willing to answer!", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022189103132987392", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022282692638806026", "type": "Reply", "timestamp": "2022-09-21T23:06:27.019+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> how this would work in a flex based widget (e.g. a column or row). We also should try to think about how it'd work in general for multi-child ROs\nIt works well, no need to do any special treatment indeed \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022189103132987392", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022282837015150662", "type": "Default", "timestamp": "2022-09-21T23:07:01.441+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield Btw I have answered your comments in google doc as well", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022283305078501416", "type": "Reply", "timestamp": "2022-09-21T23:08:53.036+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> allow trivial layout changes to take priority over multi-frame changes\nyes, allow things like a animating indicator or a scrolling listview to take priority over normal janky heavy build/layout", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4d", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44d.svg"}, "count": 1}], "mentions": [{"id": "118876142114570240", "name": "SecondFlight", "discriminator": "7948", "nickname": "SecondFlight", "isBot": false}], "reference": {"messageId": "1022158676565430372", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022283500801499156", "type": "Default", "timestamp": "2022-09-21T23:09:39.7+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> if an expensive widget needed to rebuild in a different part of the tree then it would still jank since the animation builder would still need to wait its turn", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022283729735000186", "type": "Default", "timestamp": "2022-09-21T23:10:34.282+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If you mean that, your animation requires an expensive widget built onto a different part of tree, then yes it will jank", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4d", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44d.svg"}, "count": 1}], "mentions": []}, {"id": "1022284203703939164", "type": "Default", "timestamp": "2022-09-21T23:12:27.285+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "But will that be common? \"some amount of layout shifting\" - For example, a scrolling listview is very common case where we need 60fps smoothness. See the design doc, it indeed only needs a tiny change to OffsetLayer.offset", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4d", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44d.svg"}, "count": 1}], "mentions": []}, {"id": "1022284953779707906", "type": "Reply", "timestamp": "2022-09-21T23:15:26.117+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(I will update the doc probably within an hour)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "isBot": false}], "reference": {"messageId": "1022158210309820436", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022336752695918713", "type": "Default", "timestamp": "2022-09-22T02:41:15.941+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield  Yes, if I understand correctly, this case should not need to be considered separately. Since this solution does not affect the existing flow, it just calls preemptRender to submit a frame of drawing to engine at the end of the 16ms. Then continue back to the existing Layout flow", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022337039540174888", "type": "Default", "timestamp": "2022-09-22T02:42:24.33+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes it is like that", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022338135360802816", "type": "Default", "timestamp": "2022-09-22T02:46:45.594+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@fzyzcjy  Yeah, I thought about it later, and I think one of the challenges is. In the case of video, when we go from 15FPS to 30fps, we actually know the content of each frame, so we can calculate the difference between two frames and interpolate them (IIRC some frames are diff messages). But with Flutter, we don't know what it looks like until we paint it on the next frame.", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}]}, {"id": "1022338260871168130", "type": "Default", "timestamp": "2022-09-22T02:47:15.518+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "For example, in this case, when I navigate from loading to a specific page", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022338351434563605", "type": "Default", "timestamp": "2022-09-22T02:47:37.11+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [{"id": "1022338351099027567", "url": "https://cdn.discordapp.com/attachments/1021987751710699632/1022338351099027567/unknown.png", "fileName": "unknown.png", "fileSizeBytes": 497071}], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022338478995935334", "type": "Default", "timestamp": "2022-09-22T02:48:07.523+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "video source https://github.com/flutter/flutter/issues/110063#issuecomment-1223774091", "author": {"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/840126665828859904/e342a1c3b8712e18b9466b91cff7786e.png?size=512"}, "attachments": [], "embeds": [{"title": "Dedicated thread to handle the animation execution \u00b7 Issue #110063 ...", "url": "https://github.com/flutter/flutter/issues/110063", "timestamp": null, "description": "Now, we will use impeller to solve some Jank problems caused by the Shader compilation, which will somewhat alleviate the Jank problem of page jumping. But I think this is limited. Since the comput...", "color": "#1E2327", "thumbnail": {"url": "https://images-ext-2.discordapp.net/external/-eI7O0ws-y8mMpA00G2CyLpFuyWycEH-XLVHsDkozuI/https/opengraph.githubassets.com/9960e3f39b8338ddac48164ac6baaf958f08bb32ef14de60e27f33cf0fbcffa1/flutter/flutter/issues/110063", "width": 1200, "height": 600}, "images": [], "fields": []}], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022339665178669076", "type": "Default", "timestamp": "2022-09-22T02:52:50.331+00:00", "timestampEdited": "2022-09-22T02:53:05.859+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "@Nayuta I have not checked Nvidia's tech in details yet. But I guess, because of latency reasons, it will only \"guess\" extra frames from previous frame? (Will check this soon)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "isBot": false}]}, {"id": "1022339976869970010", "type": "Default", "timestamp": "2022-09-22T02:54:04.644+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "For the navigation, say the new page takes 3 frame to render and the page shift animation is 10 frame. Then, users will see 60fps smooth page shift, and during frame 0-3 they see new page is purely empty and in frame 4-10 they see new page with content", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "", "name": "\ud83d\udc4c", "isAnimated": false, "imageUrl": "https://twemoji.maxcdn.com/v/latest/svg/1f44c.svg"}, "count": 1}], "mentions": []}, {"id": "1022344022771105852", "type": "Default", "timestamp": "2022-09-22T03:10:09.262+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I think that a solution that requires developers to implement their own render objects to achieve this may be interesting for a package but probably won't end up in the core framework", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022344204283826186", "type": "Default", "timestamp": "2022-09-22T03:10:52.538+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If we require developers to think more about whether their widget/RO needs this, and how to create a custom one that will do the right thing, it's going to be very difficult for them to use. It might be very useful and a skilled developer might find very clever ways to do it, but it won't be something that will scale very well.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022345695509876796", "type": "Reply", "timestamp": "2022-09-22T03:16:48.074+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> requires developers to implement their own render objects to achieve \nWell I guess yes and no. \n1. For anything that fit into a subtree, no need for dev to do anything except for inserting PreemptDisplayList widget to the tree\n2. For list view scrolling, we do need to change listview's source code a bit, but flutter devs will not even know that change", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022344022771105852", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022345949797949450", "type": "Default", "timestamp": "2022-09-22T03:17:48.701+00:00", "timestampEdited": "2022-09-22T03:19:34.632+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "Let me think about whether I can do something like \"just drop in a widget and it works\" for end users \ud83e\udd14", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022347027532763136", "type": "Default", "timestamp": "2022-09-22T03:22:05.653+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Do you think the 1. and 2. above are enough to cover most common use cases?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022347123229986929", "type": "Default", "timestamp": "2022-09-22T03:22:28.469+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If so then maybe we are ok - we speed up common cases, and for rare edge cases they need to craft something", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022348023604465694", "type": "Default", "timestamp": "2022-09-22T03:26:03.135+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It's really hard to tell whether something fits into a subtree, particularly in a large project with many people working on it and in situations where large subtrees are getting built (route transitions)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022348134547980298", "type": "Default", "timestamp": "2022-09-22T03:26:29.586+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Scrolling isn't usually the big offender here - we have mechanisms to lazily build the contents of what's getting scrolled, and changing the offset on the layer of what's already built is cheap", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022348342090539044", "type": "Default", "timestamp": "2022-09-22T03:27:19.068+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "The problem is more like \"I need to build an entire new tree of widgets in 8ms or less and I have 300+ widgets to build to get there and on my low end phone it's taking a long time\"", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022348923249119304", "type": "Default", "timestamp": "2022-09-22T03:29:37.627+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield \n> It's really hard to tell whether something fits into a subtree, particularly in a large project with many people working on it and in situations where large subtrees are getting built (route transitions)\nRoute transitions will always not fit into a leaf subtree indeed, but it is in my example 3.\n> Scrolling isn't usually the big offender here - we have mechanisms to lazily build the contents of what's getting scrolled, and changing the offset on the layer of what's already built is cheap\n@Nayuta 's Keframe deals with scrolling and is popular, and I also see problems in scrolling (both in my realworld app and my experiments), so I guess it may be a problem sometimes\n> The problem is more like \"I need to build an entire new tree of widgets in 8ms or less and I have 300+ widgets to build to get there and on my low end phone it's taking a long time\"\ni.e. page transition? (the example 3)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "840126665828859904", "name": "Nayuta", "discriminator": "9305", "nickname": "Nayuta", "isBot": false}, {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022349287629271111", "type": "Default", "timestamp": "2022-09-22T03:31:04.502+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So maybe what I should do is answering: \"Devs want to write fancy route transition animations, by themselves and without need to think hard, and at the same time, the new page is heavy and cannot be rendered in one frame\"", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022349323582832681", "type": "Default", "timestamp": "2022-09-22T03:31:13.074+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I will come back when having a solution \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022349554542190643", "type": "Default", "timestamp": "2022-09-22T03:32:08.139+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I think it's a little more like \"devs want to inflate a large widget tree and be confident that if it doesn't fit into frame budget it will get broken up into pieces that make sense\"", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022349664705597482", "type": "Default", "timestamp": "2022-09-22T03:32:34.404+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(And they can't spend hours altering the logic controlling that every time they refactor or add widgets)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022349833580855409", "type": "Default", "timestamp": "2022-09-22T03:33:14.667+00:00", "timestampEdited": "2022-09-22T03:33:27.336+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "> \"devs want to inflate a large widget tree and be confident that if it doesn't fit into frame budget it will get broken up into pieces that make sense\"\nI see. That is exactly what the proposal aims to solve.\n> (And they can't spend hours altering the logic controlling that every time they refactor or add widgets)\nTotally agree \ud83d\ude42 I should make the dev-facing API easier", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022350466761379881", "type": "Default", "timestamp": "2022-09-22T03:35:45.629+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield Well, maybe I forget to explain: Dev *never* need to do anything special for most of their app. The *only* extra thing is the part for 60fps smooth animation. Only if they want something to be very smooth, and it is not a leaf subtree (e.g. loading indicator) and not a scrolling listview and not a already-provided-in-framework page transition, they will have to write some extra code (in the current proposal).", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022351031981572127", "type": "Default", "timestamp": "2022-09-22T03:38:00.388+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It might help to have some example application showing the improvements", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022351070007132160", "type": "Default", "timestamp": "2022-09-22T03:38:09.454+00:00", "timestampEdited": "2022-09-22T03:40:15.141+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "Would you mind giving a realworld example where userrs, using my currently proposed api, have to write a lot of extra code? such that I will have an example in mind to optimize", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022351088550158366", "type": "Reply", "timestamp": "2022-09-22T03:38:13.875+00:00", "timestampEdited": "2022-09-22T03:38:37.917+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "Sure, I should do that. Probably create an app w/ page transition etc", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022351031981572127", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022384252085604372", "type": "Default", "timestamp": "2022-09-22T05:50:00.678+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Quick update: I am now experimenting multiple subtrees (i.e. a forest). Flutter seems to allow so (e.g. examples/api/lib/widgets/framework/build_owner.0.dart example). If this works, we may have a natural API, i.e. only insert a few extra Widgets to dev's widget tree and that's all, and @dnfield's worry will be solved.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022393700594229259", "type": "Reply", "timestamp": "2022-09-22T06:27:33.378+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "for some reason I think maybe build in one frame, layout and paint in next frame is acceptable", "author": {"id": "603238633394405377", "name": "XanaHopper", "discriminator": "5803", "nickname": "XanaHopper", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/603238633394405377/9f7c377ff0835cb343f465271662ab35.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022348342090539044", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022395490924515369", "type": "Default", "timestamp": "2022-09-22T06:34:40.226+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Agree, if that is implementable looks like also an idea, as long as the build fits in 16ms", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022518994579755108", "type": "Default", "timestamp": "2022-09-22T14:45:25.792+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Update: minimalist API (one widget for everything) + a prototype about framework layer.\n\nNow, developers will only need to insert `PreemptBuilder(builder: (context, child) => whatever_you_like, child: also_free_to_choose)` widget, and that's all. Arbitrary builder, arbitrary child subtree, and smooth 60fps will be there for the builder. The google doc is updated to discuss this - mainly in (1) \"usage examples\" (2) \"From preemptModifyLayerTree to PreemptBuilder\" in \"detailed design\".", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022519050875707513", "type": "Default", "timestamp": "2022-09-22T14:45:39.214+00:00", "timestampEdited": "2022-09-22T14:45:45.152+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield I guess your worry is now solved? \ud83d\ude04", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022520470278520882", "type": "Default", "timestamp": "2022-09-22T14:51:17.626+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It'd help to see usage", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022520689351213126", "type": "Default", "timestamp": "2022-09-22T14:52:09.857+00:00", "timestampEdited": "2022-09-22T14:54:52.547+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "In the example section of the google doc, updated", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022520976669409390", "type": "Default", "timestamp": "2022-09-22T14:53:18.359+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "```\nYourParentWidgets(\n  child: PreemptBuilder(\n    builder: (_, child) => YourFancyAnimationWhichNeeds60FPS(child: child)),\n    child: YourNewPageAndSoOn(),\n  )\n)\n```", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022521002900586577", "type": "Default", "timestamp": "2022-09-22T14:53:24.613+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "For page transition", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022521020885782538", "type": "Default", "timestamp": "2022-09-22T14:53:28.901+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022521131653148672", "type": "Default", "timestamp": "2022-09-22T14:53:55.31+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "All those YourSomthing are plain old widget trees, no special", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022521872950243338", "type": "Default", "timestamp": "2022-09-22T14:56:52.049+00:00", "timestampEdited": "2022-09-22T15:09:23.363+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "@dnfield Curious is it OK to you? Btw I am going to sleep in a minute and will reply 8hr later for later comments", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}]}, {"id": "1022525438846828626", "type": "Default", "timestamp": "2022-09-22T15:11:02.225+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "A demo would help", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022641922352881774", "type": "Default", "timestamp": "2022-09-22T22:53:54.057+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It is still a prototype :/", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022642041236246588", "type": "Reply", "timestamp": "2022-09-22T22:54:22.401+00:00", "timestampEdited": "2022-09-22T23:08:02.349+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "I will have a more complete prototype today. Just want to confirm whether the user-facing API looks good to you or not (b/c it is an API, not an implementation detail)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022525438846828626", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}, {"id": "1022642455327289405", "type": "Default", "timestamp": "2022-09-22T22:56:01.128+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If the API is still bad I need to think another", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022654879577145364", "type": "Default", "timestamp": "2022-09-22T23:45:23.3+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It's still not quite clear to me how it will work or if it's solving the problem that I'm particularly interested in (building big widget trees on slow devices)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022655590494896139", "type": "Default", "timestamp": "2022-09-22T23:48:12.796+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> if it's solving the problem that I'm particularly interested in (building big widget trees on slow devices)\nAt the API level I guess yes?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022655611919417374", "type": "Default", "timestamp": "2022-09-22T23:48:17.904+00:00", "timestampEdited": "2022-09-22T23:48:35.712+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "```\nYourParentWidgets(\n  child: PreemptBuilder(\n    builder: (_, child) => YourFancyAnimationWhichNeeds60FPS(child: child)),\n    child: ABigWidgetTreeThatYouWant(),\n  )\n)\n```", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022655894992977980", "type": "Default", "timestamp": "2022-09-22T23:49:25.394+00:00", "timestampEdited": "2022-09-22T23:49:28.464+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "> how it will work\nThe code is already working (except that I have not modify engine, so it just omits later window.render to screen...), anyway I will prototype more today", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022862703032795176", "type": "Default", "timestamp": "2022-09-23T13:31:12.273+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "https://discord.com/channels/608014603317936148/608021234516754444/1022862104325259294", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1022862801095630972", "type": "Reply", "timestamp": "2022-09-23T13:31:35.653+00:00", "timestampEdited": "2022-09-23T13:31:38.968+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "I made the prototype \ud83d\ude04", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1022525438846828626", "channelId": "1021987751710699632", "guildId": "608014603317936148"}}], "messageCount": 159}}