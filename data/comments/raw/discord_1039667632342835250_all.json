{"source": "discord", "metadata": {"channel_id": "1039667632342835250", "after": null, "before": null}, "content": {"guild": {"id": "608014603317936148", "name": "flutter", "iconUrl": "https://cdn.discordapp.com/icons/608014603317936148/0ccc662ed5e2e6df807f4d3cde7018e8.png"}, "channel": {"id": "1039667632342835250", "type": "GuildPublicThread", "categoryId": "608021234516754444", "category": "hackers-framework-\ud83d\udd29", "name": "Smooth rendering", "topic": null}, "dateRange": {"after": null, "before": null}, "messages": [{"id": "1039694951103090769", "type": "21", "timestamp": "2022-11-09T00:16:32.941+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1039667632342835250", "channelId": "608021234516754444", "guildId": "608014603317936148"}}, {"id": "1039694953443500103", "type": "Default", "timestamp": "2022-11-09T00:16:33.499+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Yes! I think there are a number of things (sorry, I've been in meetings)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039695078609928262", "type": "ChannelNameChange", "timestamp": "2022-11-09T00:17:03.341+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Changed the channel name.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039695190899826818", "type": "Default", "timestamp": "2022-11-09T00:17:30.113+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So there are a few things that I think are needed: we need to make sure we don't make it \"easy\" for developers to ignore backpressure from the GPU", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039695322621943880", "type": "Default", "timestamp": "2022-11-09T00:18:01.518+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "We need to make sure that we're not relying on the OS to schedule us exactly when we'd like if we choose to deschedule, and that we're not spending significant amounts of time spinning to avoid descheduling", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039701612647694397", "type": "Reply", "timestamp": "2022-11-09T00:43:01.177+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It's okay", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039694953443500103", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039701702112186578", "type": "Reply", "timestamp": "2022-11-09T00:43:22.507+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Definitely", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039695190899826818", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039702165096247386", "type": "Default", "timestamp": "2022-11-09T00:45:12.891+00:00", "timestampEdited": "2022-11-09T00:45:41.53+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "Btw I have replied to your questions in most PRs previously", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039702290010996766", "type": "Default", "timestamp": "2022-11-09T00:45:42.673+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(just a reminder in case github does not send notification)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039702860478283856", "type": "Default", "timestamp": "2022-11-09T00:47:58.683+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> we don't make it \"easy\" for developers to ignore backpressure from the GPU\nSo continuing from https://github.com/flutter/engine/pull/37343 - may I know a bit more about why *conditionally* removing back-pressure is bad?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039703037570203668", "type": "Default", "timestamp": "2022-11-09T00:48:40.905+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> We need to make sure that we're not relying on the OS to schedule us exactly when we'd like if we choose to deschedule, and that we're not spending significant amounts of time spinning to avoid descheduling\nHope my thoughts here help a little bit: https://github.com/flutter/engine/pull/37341#issuecomment-1304649243", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039703438507917423", "type": "Reply", "timestamp": "2022-11-09T00:50:16.496+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "The purpose of GPU backpressure is to help make sure we don't end up outrunning the GPU on the CPU, which will lead to jank because the GPU can't give us buffers fast enough. We've had issues with this for example even when we tried to use extensions on Android wher it would tell the GPU to drop all but the latest buffer submitted per vsync (led to jittering sometimes which looked worse/as bad as jank).", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1039702860478283856", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039704175505834014", "type": "Default", "timestamp": "2022-11-09T00:53:12.21+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> we don't end up outrunning the GPU on the CPU, which will lead to jank because the GPU can't give us buffers fast enough.\nA bit confused... Let's say GPU is super janky and takes 100ms + CPU outrunning it and compute 6 scenes (though my proposal will not be this bad). Then, IMHO the main problem is CPU  waste battery, because the scene is thrown away. However, seems that the jank will be exactly the same, no matter whether CPU computes 6 scenes or 0 scenes, because the bottleneck is GPU?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039704674913226862", "type": "Default", "timestamp": "2022-11-09T00:55:11.278+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "The problem is more like: the GPU has 3 or 4 buffers to work with. If you keep asking it to give you buffers to fill when it's busy with them, you're taking time from it doing the work it needs to do to show pixels on the screen, and because you're distracting it from the work it needs to be doing now you're making everything worse for subsequent frames (until you finally stop and let it finish its work queue).", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039704793502986330", "type": "Default", "timestamp": "2022-11-09T00:55:39.552+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Ah interesting insight!", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039705039276625941", "type": "Default", "timestamp": "2022-11-09T00:56:38.149+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So you could write a program that just continually asks the GPU to hand you a buffer to draw into, but you'll overwhelm the GPU and won't be able to draw as many frames. The solution is to listen to vsync and do your best to only ask for/submit a buffer once per vsync.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039705229190500412", "type": "Default", "timestamp": "2022-11-09T00:57:23.428+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> asks the GPU to hand you a buffer to draw into\nMay I know where the code in flutter does this? Is it happened during the rasterization, or happen when ui thread creates a scene tree? (I guess former?)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039705480366395494", "type": "Default", "timestamp": "2022-11-09T00:58:23.313+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If the former, then imho, whether ui thread is computing extra scenes is not a problem.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039705593834897439", "type": "Default", "timestamp": "2022-11-09T00:58:50.366+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "because ui thread does not consume GPU buffers, and also do not disturb rasterizer from doing anything fancy", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039705814912479262", "type": "Default", "timestamp": "2022-11-09T00:59:43.075+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It happens implicitly when the raster task runner asks for a surface", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039705936849281085", "type": "Default", "timestamp": "2022-11-09T01:00:12.147+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "And we tell the rasterizer to do that when the animator is done getting a frame from the framework", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039706035012763729", "type": "Default", "timestamp": "2022-11-09T01:00:35.551+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> when the animator is done getting a frame from the framework\nso, a `window.render`?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039706102654312498", "type": "Default", "timestamp": "2022-11-09T01:00:51.678+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "i.e. Animator::Render", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039706251413696542", "type": "Default", "timestamp": "2022-11-09T01:01:27.145+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "yes", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039706311383842837", "type": "Default", "timestamp": "2022-11-09T01:01:41.443+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Then imho it is no problem, at least for https://github.com/flutter/engine/pull/37343", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039706361249943552", "type": "Default", "timestamp": "2022-11-09T01:01:53.332+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "because imho we just do extra onBeginFrame, not extra window.render", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039706460831105046", "type": "Default", "timestamp": "2022-11-09T01:02:17.074+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "hmm wait a bit", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707171157459014", "type": "Default", "timestamp": "2022-11-09T01:05:06.429+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "my reasoning is: in this pr, what I did is, BeginFrame will run ui thread pipeline, even if it sees rasterizer queue is full. when ui thread finishes the pipeline, it calls window.render thus Animator::Render. then, if rasterizer queue is still full, it will drop the Scene (ensured by pipeline.h implementation); if not full, it will enqueue the Scene. Thus, IMHO from rasterizer's eyes it is not different.", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707208927166464", "type": "Default", "timestamp": "2022-11-09T01:05:15.434+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "once you call onBeginFrame, the framework will eventually call window.render right?", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707254775095366", "type": "Default", "timestamp": "2022-11-09T01:05:26.365+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "sure, but that window.render may be useless", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707304800571433", "type": "Default", "timestamp": "2022-11-09T01:05:38.292+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "that will cause a waste, but no harm to rasterizer", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707417098846310", "type": "Default", "timestamp": "2022-11-09T01:06:05.066+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "a waste because the work ui thread has done (the Scene) is not used", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707575245099038", "type": "Default", "timestamp": "2022-11-09T01:06:42.771+00:00", "timestampEdited": "2022-11-09T01:06:58.647+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "(if you are worried about this waste I can explain more - shortly speaking it may be worthwhile; but anyway we are discussing rasterizer and gpu now so I do not want to distract)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039707894658109501", "type": "Default", "timestamp": "2022-11-09T01:07:58.925+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If we have a benchmark that shows improvement from this it's probably worth exploring. Right now I'm a bit skewed towards saying this will be bad because it will consume more CPU/power, and on lower end devices that will hurt a lot", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708140675014686", "type": "Default", "timestamp": "2022-11-09T01:08:57.58+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "The other thing to consider with that is what happens when you succeed: does the new frame that gets added to the pipeline look like it \"fits\" well with the previous and next frames, or does it get rendered in an unexpected vsync and end up looking slightly off/jittery", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708256425218058", "type": "Default", "timestamp": "2022-11-09T01:09:25.177+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> will be bad because it will consume more CPU/power, and on lower end devices that will hurt a lot\nThat happens only if it is really wasted. However, looking at figure in https://github.com/flutter/engine/pull/36912 - which is the main case the proposal is to solve - ui thread work is not wasted at all", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708499132809256", "type": "Default", "timestamp": "2022-11-09T01:10:23.043+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "> If we have a benchmark that shows improvement from this it's probably worth exploring\nIs it OK to be a benchmark like https://github.com/flutter/engine/pull/37341, i.e. a one with tons of deliberately blank loops?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708528539091015", "type": "Default", "timestamp": "2022-11-09T01:10:30.054+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Sure, but this is not the typical problem that I see when working on real applications on lower end devices \ud83d\ude42", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708612550987867", "type": "Reply", "timestamp": "2022-11-09T01:10:50.084+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Btw what is the typical problems?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039708528539091015", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039708687905861695", "type": "Default", "timestamp": "2022-11-09T01:11:08.05+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "The more typical problem is a frame that just blows way through frame budget (e.g. 40-50ms) to build.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708692091764756", "type": "Default", "timestamp": "2022-11-09T01:11:09.048+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Indeed I aim at 60FPS (not 55FPS etc) so each corner case I face needs to be solved \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708738430435378", "type": "Reply", "timestamp": "2022-11-09T01:11:20.096+00:00", "timestampEdited": "2022-11-09T01:11:50.077+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "That's just https://github.com/fzyzcjy/flutter_smooth solves! \ud83d\ude04", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039708687905861695", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039708905636368384", "type": "Default", "timestamp": "2022-11-09T01:11:59.961+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So this benchmark: https://github.com/flutter/flutter/blob/master/dev/benchmarks/macrobenchmarks/lib/src/list_text_layout.dart", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039708977434480750", "type": "Default", "timestamp": "2022-11-09T01:12:17.079+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Indeed, I do not realize PR 36912 is even a problem, *before* I have finished the main part of flutter_smooth", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709095629967440", "type": "Default", "timestamp": "2022-11-09T01:12:45.259+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "In other words: flutter_smooth solves the main type of problem, then the problems that are less likely to happen now become main problems that makes me about 50-55FPS but not ~60FPS", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709126009311312", "type": "Default", "timestamp": "2022-11-09T01:12:52.502+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "That draws something like a contacts list. On a low end Android device, building that scene can easily take 27-30ms, mostly in text layout", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709222406995978", "type": "Default", "timestamp": "2022-11-09T01:13:15.485+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "IIRC my earliest prototype of flutter smooth have already solved that \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709350857551872", "type": "Default", "timestamp": "2022-11-09T01:13:46.11+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "https://github.com/flutter/flutter/issues/101227#issuecomment-1256212759", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709385800286259", "type": "Default", "timestamp": "2022-11-09T01:13:54.441+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(at that time it is not called flutter_smooth)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709399515676733", "type": "Reply", "timestamp": "2022-11-09T01:13:57.711+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I've yet to see a full, runnable solution that solves it though. My recollection (which may be wrong) is that the proposals tended to have a lot of comments like \"fix this later\"", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "isBot": false}], "reference": {"messageId": "1039709222406995978", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039709532768706592", "type": "Default", "timestamp": "2022-11-09T01:14:29.481+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Ah, sure, I should make a full runnable app now (but with custom framework and engine code)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709785500692561", "type": "Default", "timestamp": "2022-11-09T01:15:29.737+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "But I already have sth similar: https://github.com/fzyzcjy/flutter_smooth/blob/bf4f69884b2b05147875d7c6ee1b28b52e5c34eb/packages/smooth/example/lib/example_page_transition/sub_page.dart#L68", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039709860444520488", "type": "Default", "timestamp": "2022-11-09T01:15:47.605+00:00", "timestampEdited": "2022-11-09T01:16:02.552+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "Smooth animation (material page route) when entering a page, and that page is really heavy to build (using `ComplexWidget` to simulate, can be seen in code)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039710060865134662", "type": "Default", "timestamp": "2022-11-09T01:16:35.389+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "is that sound interesting to you? or I need to make an exact reproduction again for list_text_layout", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039710089956819004", "type": "Default", "timestamp": "2022-11-09T01:16:42.325+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I am not convinced that it is actually the same.  And even if it is the same problem, it would need to be adopted pretty widely before we could land changes to the engine that only make sense if you're using it.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039710167329165342", "type": "Default", "timestamp": "2022-11-09T01:17:00.772+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I'd like to see what it looks like to use your solution to fix the list_text_layout to be faster", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039710208324288637", "type": "Default", "timestamp": "2022-11-09T01:17:10.546+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(even if it requires a custom engine or framework build to achieve)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039710612810379264", "type": "Reply", "timestamp": "2022-11-09T01:18:46.983+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(forget to reply this) It looks well IMHO. But if you are having a rasterization that is longer than 16ms, then it is inevitable to have one jank feeling. see the main figure of PR for more details. And, as for flutter_smooth (note: the PR also holds for classical flutter), an extra doc page: https://cjycode.com/flutter_smooth/benchmark/analyze/linearity/ (I made up a term called linearity, which is what you mention as jittery I guess)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [{"title": "Linearity | flutter_smooth", "url": "https://cjycode.com/flutter_smooth/benchmark/analyze/linearity/", "timestamp": null, "description": "", "images": [], "fields": []}], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039708140675014686", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039710821175009290", "type": "Reply", "timestamp": "2022-11-09T01:19:36.661+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Sure. https://github.com/fzyzcjy/flutter_smooth/issues/173", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039710167329165342", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039711163174375546", "type": "Reply", "timestamp": "2022-11-09T01:20:58.2+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "A bit confused: Do you mean flutter_smooth should be adopted widely before flutter engine can change?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039710089956819004", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039711305201897502", "type": "Default", "timestamp": "2022-11-09T01:21:32.062+00:00", "timestampEdited": "2022-11-09T01:21:49.19+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "But imho most people (including me) will never use something that is not in flutter stable for production app", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711607808348260", "type": "Default", "timestamp": "2022-11-09T01:22:44.209+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "But the stars (>700) may show that many are interested in it", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711628708548738", "type": "Default", "timestamp": "2022-11-09T01:22:49.192+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "So I said that a patch you opened in the engine will fail to help some common sources of jank and actually potentially make them worse on low end devices. If I understand, you're saying those common sources go away with flutter_smooth so that's not a problem, and you're moving on to other sources of jank once you solve those common problems.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711871055446016", "type": "Default", "timestamp": "2022-11-09T01:23:46.972+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "as well as reddit popularity https://www.reddit.com/r/FlutterDev/comments/y6um51/be_60fps_smooth_no_matter_how_janky_your_app/", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [{"title": "r/FlutterDev - Be 60FPS smooth, no matter how janky your app origin...", "url": "https://www.reddit.com/r/FlutterDev/comments/y6um51/be_60fps_smooth_no_matter_how_janky_your_app/", "timestamp": null, "description": "250 votes and 111 comments so far on Reddit", "color": "#FFFFFF", "thumbnail": {"url": "https://images-ext-1.discordapp.net/external/1bnH_lsMK9wJmUwAJPx3FEiSIvl3WEr-KTv7XCL3Ga8/%3Fauto%3Dwebp%26s%3D68a41ee24533ed45db91f489e477c96356783208/https/external-preview.redd.it/LqnZnHGOByORezwoxaUp4nOJKmr0C4-7TVcyksFHxpI.jpg", "width": 1280, "height": 640}, "images": [], "fields": []}], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711887924936756", "type": "Default", "timestamp": "2022-11-09T01:23:50.994+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [{"id": "1039711887576801330", "url": "https://cdn.discordapp.com/attachments/1039667632342835250/1039711887576801330/image.png", "fileName": "image.png", "fileSizeBytes": 240142}], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711906434388071", "type": "Default", "timestamp": "2022-11-09T01:23:55.407+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "4th popular in this year", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711909877923962", "type": "Default", "timestamp": "2022-11-09T01:23:56.228+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Put more concretely: flutter has some very large customers who don't use flutter_smooth. We can't make changes to the engine that will make their applications worse. If flutter_smooth helps those applications, we should try to integrate it into the framework", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039711926151823450", "type": "Default", "timestamp": "2022-11-09T01:24:00.108+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "That's very cool \ud83d\ude42", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712075179622500", "type": "Default", "timestamp": "2022-11-09T01:24:35.639+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "and even get to GitHub trending main board twice (I really did not expect that - you know github trending main board contains all languages, so almost impossible for a Flutter/Dart project to be there)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "613157684807598081", "name": "flutter", "isAnimated": false, "imageUrl": "https://cdn.discordapp.com/emojis/613157684807598081.png"}, "count": 1}], "mentions": []}, {"id": "1039712226166177842", "type": "Default", "timestamp": "2022-11-09T01:25:11.637+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "https://github.com/search?q=flutter_smooth&type=code can see some spiders get that trending data - 10.30 and 10.21", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712406819065856", "type": "Reply", "timestamp": "2022-11-09T01:25:54.708+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "imho maybe not \"make them worse\".\n> If I understand, you're saying those common sources go away with flutter_smooth so that's not a problem, and you're moving on to other sources of jank once you solve those common problems.\nYes", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039711628708548738", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039712539250008065", "type": "Reply", "timestamp": "2022-11-09T01:26:26.282+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "definitely, it is also very interesting to be integrated to flutter", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039711909877923962", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039712647672778822", "type": "Default", "timestamp": "2022-11-09T01:26:52.132+00:00", "timestampEdited": "2022-11-09T01:27:23.9+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "so... what makes it worse if having the PR on low end device?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712732653559904", "type": "Default", "timestamp": "2022-11-09T01:27:12.393+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "except that I do not provide a benchmark yet (since you requested just a few minutes ago \ud83d\ude42 )", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712821434396712", "type": "Default", "timestamp": "2022-11-09T01:27:33.56+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "the rasterizer problem seems not to be a problem as said above", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712835174944839", "type": "Default", "timestamp": "2022-11-09T01:27:36.836+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "or I understand wrongly", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712839323111475", "type": "Default", "timestamp": "2022-11-09T01:27:37.825+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Doing more work will make things worse", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712872604905543", "type": "Default", "timestamp": "2022-11-09T01:27:45.76+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I see", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039712883677864030", "type": "Default", "timestamp": "2022-11-09T01:27:48.4+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "If you're on a slow device and it's taking a lot of time to build every frame", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713016654069780", "type": "Default", "timestamp": "2022-11-09T01:28:20.104+00:00", "timestampEdited": "2022-11-09T01:28:27.842+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "> taking a lot of time to build every frame\nyes, that happens for users without flutter_smooth", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713302298755132", "type": "Default", "timestamp": "2022-11-09T01:29:28.207+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "There are many more users who don't have flutter_smooth than do \ud83d\ude42 FWIW, internally at google applications are built relatively close to head of master", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713359785893918", "type": "Default", "timestamp": "2022-11-09T01:29:41.913+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(usually about a week or so behind it)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713403742191697", "type": "Reply", "timestamp": "2022-11-09T01:29:52.393+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "you guys are so brave \ud83d\ude42", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": [{"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "isBot": false}], "reference": {"messageId": "1039713302298755132", "channelId": "1039667632342835250", "guildId": "608014603317936148"}}, {"id": "1039713427154812958", "type": "Default", "timestamp": "2022-11-09T01:29:57.975+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "even not built with beta?", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713482498642000", "type": "Default", "timestamp": "2022-11-09T01:30:11.17+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "We'll get yelled at by all those customers when their benchmarks go south, and telling them \"oh well if you use flutter_smooth it'll be fixed\" won't be good enough", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713515696574565", "type": "Default", "timestamp": "2022-11-09T01:30:19.085+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "definitely", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039713562358190190", "type": "Default", "timestamp": "2022-11-09T01:30:30.21+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "It's a little more complicated than what I'm saying but no, for the most part they're newer than beta", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [{"emoji": {"id": "613157684807598081", "name": "flutter", "isAnimated": false, "imageUrl": "https://cdn.discordapp.com/emojis/613157684807598081.png"}, "count": 1}], "mentions": []}, {"id": "1039713784241061978", "type": "Default", "timestamp": "2022-11-09T01:31:23.111+00:00", "timestampEdited": "2022-11-09T01:31:29.642+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "so I guess the main priority is like this: \n1. maybe we can firstly PR for a partial-flutter_smooth, i.e. a version for only maybe 50FPS not 60FPS (because all those edge cases are not solved). then the PR merged into flutter, and people can try it. then, if many people find it quite helpful etc, maybe we can consider the rest prs or integrate into framework?\n2. or alternatively, shall we just consider integrating flutter_smooth to framework now? so many PRs that solely wants to make flutter expose some low-level things are never a  problem now", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039714099099078756", "type": "Default", "timestamp": "2022-11-09T01:32:38.179+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "yeah, making incremental improvements is a good way to go.", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039714216770285649", "type": "Default", "timestamp": "2022-11-09T01:33:06.234+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "And having some compelling benchmarks would help ideally without requiring major surgery on the application side to achieve)", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039714308457771028", "type": "Default", "timestamp": "2022-11-09T01:33:28.094+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "totally agree", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039714471268073472", "type": "Default", "timestamp": "2022-11-09T01:34:06.911+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "Btw flutter_smooth does have (hopefully) compelling bench: (1) 3-second video in https://github.com/fzyzcjy/flutter_smooth (2) a chapter in https://cjycode.com/flutter_smooth/benchmark/", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039714605896835122", "type": "Default", "timestamp": "2022-11-09T01:34:39.009+00:00", "timestampEdited": "2022-11-09T01:34:48.814+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "so, one of the main blocker before partial-flutter_smooth can land, maybe: https://github.com/flutter/engine/pull/36438", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039714746494095380", "type": "Default", "timestamp": "2022-11-09T01:35:12.53+00:00", "timestampEdited": "2022-11-09T01:35:44.969+00:00", "callEndedTimestamp": null, "isPinned": false, "content": "also, pull-based model (e.g. https://github.com/flutter/engine/pull/36438) - otherwise ListView scrolling cannot be smooth because we have no way to read touch events, though your \"list of text\" can be", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039715266168373268", "type": "Default", "timestamp": "2022-11-09T01:37:16.43+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I think ideally we have a solution that doesn't require calling `render` more than once per `onBeginFrame`", "author": {"id": "612134153986768929", "name": "dnfield", "discriminator": "1305", "nickname": "dnfield", "color": "#0175C2", "isBot": false, "avatarUrl": "https://cdn.discordapp.com/embed/avatars/0.png"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039715360670220318", "type": "Default", "timestamp": "2022-11-09T01:37:38.961+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "I have tried to think about it, but that seems fundamental for flutter_smooth", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039715398024708289", "type": "Default", "timestamp": "2022-11-09T01:37:47.867+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "whole design details: https://cjycode.com/flutter_smooth/design/", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039715870043279462", "type": "Default", "timestamp": "2022-11-09T01:39:40.405+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "so we may not have ideal things \ud83d\ude10 but considering the benefits of flutter_smooth, I hope it is worthwhile", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}, {"id": "1039715973688729671", "type": "Default", "timestamp": "2022-11-09T01:40:05.116+00:00", "timestampEdited": null, "callEndedTimestamp": null, "isPinned": false, "content": "(benefits, including future benefits if it is merged into flutter)", "author": {"id": "742298142774525963", "name": "fzyzcjy", "discriminator": "1693", "nickname": "fzyzcjy", "color": null, "isBot": false, "avatarUrl": "https://cdn.discordapp.com/avatars/742298142774525963/8ef0815374b5ef1e07e4af8132ffcaed.png?size=512"}, "attachments": [], "embeds": [], "stickers": [], "reactions": [], "mentions": []}], "messageCount": 99}}